## 字符串

#### 1-1实例化的两种方式

实例化String的两种方式



**方法一：**直接赋值

```java
String name = "张三";
```

**方法二：**通过关键字 `new`

```java
String name1 = new String("张三");
```



#### 1-2 String的内容比较

基本数据类型使用 `==` 进行数据的比较。



**例子1**

```java
public static void main(String[] args) {
    int x = 30;
    int y = 30;

    System.out.println("比较两个数字的结果" + (x == y)); // 比较两个数字的结果true
}
```



**例子2**

```java
public static void main(String[] args) {
		String str1 = "hello"; // 直接赋值
		String str2 = new String("hello"); // 通过new 赋值
		String str3 = str2; // 传递引用
		// String str4 = "hello";
		
		System.out.println("str1==str2  " + (str1 == str2)); // false
		System.out.println("str2==str3  " + (str2 == str3)); // true
		System.out.println("str1==str3  " + (str1 == str3)); // false
		
		// System.out.println(str1 == str4); // true
	}
```

![image-20191123165611000](img/image-20191123165611000.png)



现在是用的判断相等，是判断地址空间是否相等，判断的是地址值。

如果要判断其内容是否相等，则就必须使用String类中提供的  `equals()` 方法来完成。



**例子3 使用 equals **

```java
public static void main(String[] args) {
    String str1 = "hello"; // 直接赋值
    String str2 = new String("hello"); // 通过new 赋值
    String str3 = str2; // 传递引用

    System.out.println("str1 equals str2  " + (str1.equals(str2))); // true
    System.out.println("str2 equals str3  " + (str2.equals(str3))); // true
    System.out.println("str1 equals str3  " + (str1.equals(str3))); // true
}
```



**结论：**String有两种比较方式

第一种使用  `==` 完成，**比较的是地址值**。

第二种使用  `equals` 方法完成，**用来比较的是具体的内容，开发中比较常用**





#### 1-3深入分析两种实例化方式区别

在String中可以使用直接赋值，和 `new` 调用构造方法的方式来完成，那么该使用哪种方式更合适呢？



一个字符串就是 `String` 的匿名对象

```java
System.out.println("hello".equals("hello")); // true
```



```java
String name = "张三";
// 就是表示将一个堆内存空间指向给了栈内存空间。
```

只有掌握这一点之后才可以分析出使用哪种实例化方式更合适。





**例子1，直接赋值发现一样**

在比较一次，发现三个都是true，证明以下三个对象的内存地址都一样。

**使用直接赋值的方式可以有效的节省内存**

```java
public static void main(String[] args) {
    String str1 = "hello"; // 直接赋值
    String str2 = "hello"; // 直接赋值
    String str3 = "hello"; // 直接赋值

   	System.out.println("str1==str2  " + (str1 == str2)); // true
	System.out.println("str2==str3  " + (str2 == str3)); // true
	System.out.println("str1==str3  " + (str1 == str3)); // true
}
```

![image-20191124141007587](img/image-20191124141007587.png)

**注意：直接赋值的方式**，在声明另外一个对象的时候，如果发现在堆内存的地方已经存在，那么就会指向已经存在的地址。



如果使用  `new String` 的方式就会新开辟两个堆内存地址。实例化的时候

![image-20191124142538658](img/image-20191124142538658.png)



**使用直接赋值的方式只需要一个实例化对象即可，如果使用new String()方法，就意味着要开辟两个内存对象。**

在开发中最好使用直接赋值的方式来完成。



**字符串的内容是不可改变的。**

```java
以下代码，字符串对象是改变了，但是字符串变了吗？

实际上字符串的内容改变，改变的是地址的引用关系，所以在开发中应该避免如下操作。

public class StringDemo4 {
	public static void main(String[] args) {
		String str = "hello"; // 声明字符串
		str = str + "world"; // 修改字符串
		
		System.out.println("str = " + str);
	}
}
```

![image-20191124143648824](img/image-20191124143648824.png)

```java
/**
 * 但是这样的操作，要断开连接的引用才可以完成。
 * 这样的操作性能很低，避免操作。
 * 如果非要使用这种操作的话，在后面的java常用类库中到时候会讲。StringBuffer类完成。
 */
public class StringDemo4 {
	public static void main(String[] args) {
		String str = "hello"; // 声明字符串对象
		for(int i=0;i<100;i++) { // 循环修改内容
			str += i; // 字符串的引用不断改变
		}
		System.out.println(str);
	}
}
```





#### 1-4掌握String类中的常用方法

String类的常用方法

![image-20191124150441010](img/image-20191124150441010.png)

字符数组和字符串。

一个字符串可以变成一个字符数组，同样，也可以把一个字符数组变成一个字符串。

在String类中提供了以下操作方法：



**例1、将字符串变成字符数组。**

```java
public class StringMedhode1 {
	public static void main(String[] args) {
		String str1 = "hello"; // 定义字符串
		char c[] = str1.toCharArray(); // 将一个字符串变成字符数组
		
		for(int i=0;i<c.length;i++) {
			System.out.print(c[i] + "、"); // h、e、l、l、o、
		}
		System.out.println(""); // 换行
		
		String str2 = new String(c);// 将全部的字符数组变成String
		String str3 = new String(c, 0, 3); // 将部分字符数组变为String
		
		System.out.println(str2); // hello
		System.out.println(str3); // hel
	}
}
```





**例2、从字符串中取出指定位置字符**

```java
String str1 = "hello"; // 定义字符串
System.out.println(str1.charAt(1)); // 取出第二个字符 e
```





**例3、字符串与byte数据转换**

byte数组（字节数组），在一般的IO操作中会经常使用到。

在String提供了以下的方法可以进行字符串与字节数组间转换。

字符串变为字节数组：

 ```java
String str1 = "hello"; // 定义字符串
byte b[] = str1.getBytes(); // 将字符串变为byte数组

System.out.println(new String(b)); // 将全部的byte数组变为字符串
System.out.println(new String(b, 1, 3)); // 将部分的byte数组变为字符串

//hello
//ell
 ```





**例4、取得一个字符串的长度**

```java
String str1 = "hello"; // 定义字符串

str1.length(); // 5
```





**例5、查找指定的字符串是否存在**

```java
public int indexOf(int ch)
```

从头开始查找

从指定位置开始查找

查找的时候，方法的返回值：是一个int类型的数据

此数据表示的是一个字符串的具体的位置，如果没有查找到此字符串，则返回  -1

```java
String str1 = "hello world"; // 定义字符串

System.out.println(str1.indexOf("wor")); // 6
if(str1.indexOf("el") > -1) {
    System.out.println("存在此字符");
}else {
    System.out.println("不存在此字符");
}	
```





**例6、去掉空格**

如果假设一些信息是由用户输入的话，则就有可能出现多余空格，在这种操作中，就可以利用 `trim()` 去掉左右空格，但是字符串中间的空格是不可能去掉的。

 ```java
String str1 = "    hello world     "; // 定义字符串

System.out.println(str1); //     hello world     
System.out.println(str1.trim()); // hello world
 ```





![image-20191124151103465](img/image-20191124151103465.png)



**例7、字符截取**

从一个指定的字符串取出里面的部分内容，使用方法是：

从指定位置开始一直截取到结束位置

```java
public String substring(int beginIndex, int endIndex)
    
返回一个字符串，该字符串是此字符串的子字符串。 子串开始于指定beginIndex并延伸到字符索引endIndex - 1 。 因此，子串的长度为endIndex-beginIndex
```

截取指定范围的字符串。

```java
String str1 = "hello world"; // 定义字符串

System.out.println(str1.substring(1)); // ello world
System.out.println(str1.substring(1,2)); // e
```





**例8、拆分字符串**

如果现在需要按照指定的字符串去拆分一个字符的话，则使用 `split` 方法

```java
String str1 = "hello world"; // 定义字符串
String s[] = str1.split(" "); // 按照空格进行字符串拆分

for(int i=0;i<s.length;i++) {
    System.out.println(s[i]);
}
// hello
// world
```





**例9、大小写转换**

大小写转换

```java
String str1 = "hello ZAB world"; // 定义字符串

System.out.println(str1.toLowerCase()); //hello zab world
System.out.println(str1.toUpperCase()); // HELLO ZAB WORLD
```





**例10、判断是否以指定字符串开头或结尾**

```java
public boolean startsWith(String prefix)
```

```java
public boolean endsWith(String suffix)
```

```java
String str1 = "hello ZAB world"; // 定义字符串

System.out.println(str1.startsWith("hello")); // true
System.out.println(str1.startsWith("a")); // false
System.out.println(str1.endsWith("ld")); // true
```





**例11、不区分大小写比较**

equalsIgnoreCase

在String类中 `equals()` 方法可以用来进行字符串比较的，但是此种比较方法只能针对大小写完全一致

```java
String str1 = "hello"; // 定义字符串
String str2 = "Hello";

System.out.println(str1.equals(str2)); // false
// 不区分大小写字母
System.out.println(str1.equalsIgnoreCase(str2)); // true
```





**例12、字符串替换功能**

```java
String str1 = "hello"; // 定义字符串
String newStr = str1.replace("hel", "替换后的字符");

System.out.println(str1); // hello
System.out.println(newStr); // 替换后的字符lo

String newStr2 = str1.replace("l", "a");
System.out.println(newStr2); // heaao
```





#### 1-5总结

1、String要使用直接赋值方式、因为使用 `new` 会开辟2个空间，造成内存浪费。

2、一个字符串就是 String 的匿名对象

3、字符串比较有两种方式 `==` 和 `equals`

4、掌握常用的字符串方法，必要的时候查找 API 文档。